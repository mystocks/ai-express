

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Microsoft Windows Details &mdash; AI Express用户手册 2.3.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> AI Express用户手册
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/overview.html">概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/quick_start.html">快速上手</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/solution.html">场景参考解决方案</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/xstream_guide.html">XStream用户手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/xstream_tutorials.html">XStream开发指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/xstream_more.html">XStream高级特性</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/xstream_ai.html">XStream模型与策略开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/xproto.html">XProto用户手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/xproto.html#id5">其余框架</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/tools.html">工具集</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/version.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../BuildAll/doc/copyright.html">版权声明</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">AI Express用户手册</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>Microsoft Windows Details</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/.repo/repo/docs/windows.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="microsoft-windows-details">
<h1>Microsoft Windows Details<a class="headerlink" href="#microsoft-windows-details" title="永久链接至标题">¶</a></h1>
<p>Repo is primarily developed on Linux with a lot of users on macOS.
Windows is, unfortunately, not a common platform.
There is support in repo for Windows, but there might be some rough edges.</p>
<p>Keep in mind that Windows in general is “best effort” and “community supported”.
That means we don’t actively test or verify behavior, but rely heavily on users
to report problems back to us, and to contribute fixes as needed.</p>
<p>[TOC]</p>
<div class="section" id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="永久链接至标题">¶</a></h2>
<p>We only support Windows 10 or newer.
This is largely due to symlinks not being available in older versions, but it’s
also due to most developers not using Windows.</p>
<p>We will never add code specific to older versions of Windows.
It might work, but it most likely won’t, so please don’t bother asking.</p>
</div>
<div class="section" id="git-worktrees">
<h2>Git worktrees<a class="headerlink" href="#git-worktrees" title="永久链接至标题">¶</a></h2>
<p>*** note
<strong>Warning</strong>: Repo’s support for Git worktrees is new &amp; experimental.
Please report any bugs and be sure to maintain backups!</p>
<hr class="docutils" />
<p>The Repo 2.4 release introduced support for <a class="reference external" href="https://git-scm.com/docs/git-worktree">Git worktrees</a>.
You don’t have to worry about or understand this particular feature, so don’t
worry if this section of the Git manual is particularly impenetrable.</p>
<p>The salient point is that Git worktrees allow Repo to create repo client
checkouts that do not require symlinks at all under Windows.
This means users no longer need Administrator access to sync code.</p>
<p>Simply use <code class="docutils literal notranslate"><span class="pre">--worktree</span></code> when running <code class="docutils literal notranslate"><span class="pre">repo</span> <span class="pre">init</span></code> to opt in.</p>
<p>This does not effect specific Git repositories that use symlinks themselves.</p>
</div>
<div class="section" id="symlinks-by-default">
<h2>Symlinks by default<a class="headerlink" href="#symlinks-by-default" title="永久链接至标题">¶</a></h2>
<p>*** note
<strong>NB</strong>: This section applies to the default Repo behavior which does not use
Git worktrees (see the previous section for more info).</p>
<hr class="docutils" />
<p>Repo will use symlinks heavily internally.
On *NIX platforms, this isn’t an issue, but Windows makes it a bit difficult.</p>
<p>There are some documents out there for how to do this, but usually the easiest
answer is to run your shell as an Administrator and invoke repo/git in that.</p>
<p>This isn’t a great solution, but Windows doesn’t make this easy, so here we are.</p>
<div class="section" id="launch-git-bash">
<h3>Launch Git Bash<a class="headerlink" href="#launch-git-bash" title="永久链接至标题">¶</a></h3>
<p>If you install Git Bash (see below), you can launch that with appropriate
permissions so that all programs “just work”.</p>
<ul class="simple">
<li><p>Open the Start Menu (i.e. press the ⊞ key).</p></li>
<li><p>Find/search for “Git Bash”.</p></li>
<li><p>Right click it and select “Run as administrator”.</p></li>
</ul>
<p>*** note
<strong>NB</strong>: This environment is only needed when running <code class="docutils literal notranslate"><span class="pre">repo</span></code>, or any specific <code class="docutils literal notranslate"><span class="pre">git</span></code>
command that might involve symlinks (e.g. <code class="docutils literal notranslate"><span class="pre">pull</span></code> or <code class="docutils literal notranslate"><span class="pre">checkout</span></code>).
You do not need to run all your commands in here such as your editor.</p>
</div>
<hr class="docutils" />
<div class="section" id="symlinks-with-gnu-tools">
<h3>Symlinks with GNU tools<a class="headerlink" href="#symlinks-with-gnu-tools" title="永久链接至标题">¶</a></h3>
<p>If you want to use <code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span></code> inside of the default Git/bash shell, you might need
to export this environment variable:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">MSYS</span><span class="o">=</span><span class="s2">&quot;winsymlinks:nativestrict&quot;</span>
</pre></div>
</div>
<p>Otherwise <code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span></code> will copy files and not actually create a symlink.
This also helps <code class="docutils literal notranslate"><span class="pre">tar</span></code> unpack symlinks, so that’s nice.</p>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>https://github.com/git-for-windows/git/wiki/Symbolic-Links</p></li>
<li><p>https://blogs.windows.com/windowsdeveloper/2016/12/02/symlinks-windows-10/</p></li>
</ul>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="永久链接至标题">¶</a></h2>
<p>Python 3.6 or newer is required.
Python 2 is known to be broken when running under Windows.
See our <a class="reference internal" href="python-support.html"><span class="doc">Python Support</span></a> document for more details.</p>
<p>You can grab the latest Windows installer here:<br>
https://www.python.org/downloads/release/python-3</p>
</div>
<div class="section" id="git">
<h2>Git<a class="headerlink" href="#git" title="永久链接至标题">¶</a></h2>
<p>You should install the most recent version of Git for Windows:<br>
https://git-scm.com/download/win</p>
<p>When installing, make sure to turn on “Enable symbolic links” when prompted.</p>
<p>If you’ve already installed Git for Windows, you can simply download the latest
installer from above and run it again.
It should safely upgrade things in situ for you.
This is useful if you want to switch the symbolic link option after the fact.</p>
</div>
<div class="section" id="shell">
<h2>Shell<a class="headerlink" href="#shell" title="永久链接至标题">¶</a></h2>
<p>We don’t have a specific requirement for shell environments when running repo.
Most developers use MinTTY/bash that’s included with the Git for Windows install
(so see above for installing Git).</p>
<p>Command &amp; Powershell &amp; the Windows Terminal probably work.
Who knows!</p>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="永久链接至标题">¶</a></h2>
<div class="section" id="repo-upload-always-complains-about-allowing-hooks-or-using-no-verify">
<h3>repo upload always complains about allowing hooks or using –no-verify!<a class="headerlink" href="#repo-upload-always-complains-about-allowing-hooks-or-using-no-verify" title="永久链接至标题">¶</a></h3>
<p>When using <code class="docutils literal notranslate"><span class="pre">repo</span> <span class="pre">upload</span></code> in projects that have custom repohooks, you might get
an error like the following:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ repo upload
ERROR: You must allow the pre-upload hook or use --no-verify.
</pre></div>
</div>
<p>This can be confusing as you never get prompted.
<a class="reference external" href="https://github.com/mintty/mintty/issues/56">MinTTY has a bug</a> that breaks isatty checking inside of repo which
causes repo to never interactively prompt the user which means the upload check
always fails.</p>
<p>You can workaround this by manually granting consent when uploading.
Simply add the <code class="docutils literal notranslate"><span class="pre">--verify</span></code> option whenever uploading:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ repo upload --verify
</pre></div>
</div>
<p>You will have to specify this flag every time you upload.</p>
</div>
<div class="section" id="repohooks-always-fail-with-an-close-fds-error">
<h3>repohooks always fail with an close_fds error.<a class="headerlink" href="#repohooks-always-fail-with-an-close-fds-error" title="永久链接至标题">¶</a></h3>
<p>When using the <a class="reference external" href="https://android.googlesource.com/platform/tools/repohooks">reference repohooks project</a> included in AOSP,
you might see errors like this when running <code class="docutils literal notranslate"><span class="pre">repo</span> <span class="pre">upload</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ repo upload
ERROR: Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  ...
  File <span class="s2">&quot;C:\...\lib\subprocess.py&quot;</span>, line <span class="m">351</span>, in __init__
    raise ValueError<span class="o">(</span><span class="s2">&quot;close_fds is not supported on Windows &quot;</span>
ValueError: close_fds is not supported on Windows platforms <span class="k">if</span> you redirect stdin/stderr/stdout

Failed to run main<span class="o">()</span> <span class="k">for</span> pre-upload hook<span class="p">;</span> see traceback above.
</pre></div>
</div>
<p>This error shows up when using Python 2.
You should upgrade to Python 3 instead (see above).</p>
<p>If you already have Python 3 installed, make sure it’s the default version.
Running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">--version</span></code> should say <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">3</span></code>, not <code class="docutils literal notranslate"><span class="pre">Python</span> <span class="pre">2</span></code>.
If you didn’t install the Python versions, or don’t have permission to change
the default version, you can probably workaround this by changing <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> in
your shell so the Python 3 version is found first.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Horizon Robotics

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>